<!--
  ~ This is free and unencumbered software released into the public domain.
  -->
<html>
   <head>
      <title>Apache Fortress End-to-End Web App Security Tutorial</title>
       <hr>
       <fieldset>
           <legend><b>Navigation Links</b></legend>
           <ul>
               <li><a href="./I-opensslheartbleed.html">Section I - Heartbleed Bug</a></li>
               <li><a href="./II-keys.html">Section II - Managing PKI Keys</a></li>
               <li><a href="./III-hosts.html">Section III - Set Hostname Entry</a></li>
               <li><a href="./IV-fortress-core.html">Section IV - Install Fortress Core</a></li>
               <li><a href="./V-mysql.html">Section V - Install MySQL</a></li>
               <li><a href="./VI-fortress-realm.html">Section VI - Install Fortress Realm</a></li>
               <li><a href="./VII-tomcat.html">Section VII - Install Tomcat</a></li>
               <li><a href="./VIII-fortress-web.html">Section VIII - Install Fortress Web UI</a></li>
               <li><a href="./IX-demo.html">Section IX - Install Fortress Demo</a></li>
           </ul>
           <a href="../overview-summary.html">Back to top</a>
       </fieldset>
       <hr>
   </head>
   <body>
      <p>
      <h3>Section IV - Install Fortress Core</h3>
      <img src="fortress100.gif">
      <br><br>This section provides instructions to install and configure Fortress & OpenLDAP and enable SSL traffic between them.
      <h4>Steps to install the Fortress security system</h4>
      <ol>

          <li>
              Download the <a href="https://git-wip-us.apache.org/repos/asf?p=directory-fortress-core.git;a=summary">Apache Fortress Core source bundle</a>.
          </li>

          <br>

          <li>
              Set JAVA_HOME:
            <pre>
                <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
# export JAVA_HOME=/opt/jdk1.7.0_10/
                </p>
            </pre>

          </li>

          <li>
              Extract:
            <pre>
                <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
# tar xzf directory-fortress-core-X.tar.gz
                </p>
            </pre>
          </li>

          <li>
              Change directory:
            <pre>
                <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
# cd directory-fortress-core/
                </p>
            </pre>
          </li>

          <li>
              Set M2_HOME:
            <pre>
                <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
# export M2_HOME=../builder/apache-maven/
                </p>
            </pre>
          </li>

          <li>
              Build fortress core with maven and install to local repo (needed by demo app later on):
                <pre>
                    <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
# $M2_HOME/bin/mvn clean install -DskipTests=true
                    </p>
                </pre>
          </li>

          <li>
              Set ANT_HOME:
            <pre>
                <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
# export ANT_HOME=../builder/apache-ant/
                </p>
            </pre>
          </li>

          <li>
              Bind the fortress config contained in <b>build.properties</b> to <b>config/fortress.properties</b> and base load script in <b>ldap/setup/refreshLDAPData.xml</b>:
                <pre>
                    <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
# $ANT_HOME/bin/ant init-fortress-config
                    </p>
                </pre>
              Verify the following files have been created as they are required later:
                <pre>
                    <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
# ls -l config/fortress.properties
# ls -l ldap/setup/refreshLDAPData.xml
                    </p>
                </pre>
          </li>

          <li>
              Load the fortress schema contained in <b>ldap/schema/apacheds-fortress.ldif</b> to ApacheDS instance.
          </li>

          <br>

          <li>
             Setup partition in ApacheDS server matching ldap server params in <b>config/fortress.properties</b> file.
          </li>

          <br>

          <li>
              Build the fortress LDAP DIT and create the configuration node:
                <pre>
                    <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
# $M2_HOME/bin/mvn install -Dload.file=./ldap/setup/refreshLDAPData.xml -DskipTests=true
                    </p>
                </pre>
          </li>

          <li>
              Load the fortress ARBAC policies:
                <pre>
                    <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
# $M2_HOME/bin/mvn install -Dload.file=./ldap/setup/DelegatedAdminManagerLoad.xml -DskipTests=true
                    </p>
                </pre>
          </li>
      </ol>
   </body>
   <p style="font: monospace; color: black; font-size: 6pt">This is free and unencumbered software released into the public domain.</p>
</html>
